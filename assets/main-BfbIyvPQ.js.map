{"version":3,"file":"main-BfbIyvPQ.js","sources":["../../src/main.js"],"sourcesContent":["/**\n * GEO-MARKZ.BLOG - Full Production Script\n * Фикс: Принудительная активация секции Benefits и пересчет ScrollTrigger\n */\n\n// Регистрируем плагины сразу\ngsap.registerPlugin(ScrollTrigger);\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\n    // ==========================================\n    // 1. SMOOTH SCROLL (LENIS)\n    // ==========================================\n    const lenis = new Lenis({\n        duration: 1.2,\n        easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n        smoothWheel: true,\n    });\n\n    function raf(time) {\n        lenis.raf(time);\n        requestAnimationFrame(raf);\n    }\n    requestAnimationFrame(raf);\n\n    // Синхронизация Lenis со ScrollTrigger\n    lenis.on('scroll', ScrollTrigger.update);\n    gsap.ticker.add((time) => {\n        lenis.raf(time * 1000);\n    });\n    gsap.ticker.lagSmoothing(0);\n\n\n    // ==========================================\n    // 2. МОБИЛЬНОЕ МЕНЮ (BURGER)\n    // ==========================================\n    const burger = document.querySelector('.burger');\n    const mobileMenu = document.querySelector('#mobile-menu');\n    const mobileLinks = document.querySelectorAll('.mobile-nav__link');\n\n    const toggleMenu = () => {\n        burger.classList.toggle('active');\n        mobileMenu.classList.toggle('active');\n        mobileMenu.classList.contains('active') ? lenis.stop() : lenis.start();\n    };\n\n    if (burger) burger.addEventListener('click', toggleMenu);\n\n    mobileLinks.forEach(link => {\n        link.addEventListener('click', () => {\n            if (mobileMenu.classList.contains('active')) toggleMenu();\n        });\n    });\n\n\n    // ==========================================\n    // 3. HERO ANIMATIONS\n    // ==========================================\n    const heroTitle = new SplitType('#hero-title', { types: 'words, chars' });\n    const heroTL = gsap.timeline({ delay: 0.5 });\n\n    heroTL.from(heroTitle.chars, {\n        opacity: 0,\n        y: 50,\n        stagger: 0.02,\n        duration: 1,\n        ease: \"back.out(1.7)\"\n    })\n    .from('.hero__description', { opacity: 0, y: 20, duration: 0.8 }, \"-=0.6\")\n    .from('.hero__btns', { opacity: 0, y: 20, duration: 0.8 }, \"-=0.6\")\n    .from('.hero__card', { opacity: 0, x: 50, rotation: 5, duration: 1 }, \"-=0.8\");\n\n    // Эффект Orb\n    const orb = document.querySelector('#hero-orb');\n    if (orb) {\n        window.addEventListener('mousemove', (e) => {\n            const x = (e.clientX - window.innerWidth / 2) * 0.05;\n            const y = (e.clientY - window.innerHeight / 2) * 0.05;\n            gsap.to(orb, { x, y, duration: 2, ease: \"power2.out\" });\n        });\n    }\n\n\n    // ==========================================\n    // 4. О ПЛАТФОРМЕ (ABOUT)\n    // ==========================================\n    gsap.from(\".about__container > *\", {\n        scrollTrigger: {\n            trigger: \".about\",\n            start: \"top 80%\",\n        },\n        y: 40,\n        opacity: 0,\n        stagger: 0.2,\n        duration: 0.8\n    });\n\n\n    // ==========================================\n    // 5. ПРЕИМУЩЕСТВА (BENEFITS) - ФИКСИРОВАННЫЙ БЛОК\n    // ==========================================\n    const benefitsGrid = document.querySelector('.benefits__grid');\n    const benefitCards = document.querySelectorAll('.benefit-card');\n\n    if (benefitsGrid && benefitCards.length > 0) {\n        // Используем fromTo для принудительной установки начальных и конечных точек\n        gsap.fromTo(benefitCards, \n            { \n                y: 100, \n                opacity: 0,\n                visibility: \"hidden\" \n            }, \n            {\n                scrollTrigger: {\n                    trigger: benefitsGrid,\n                    start: \"top 95%\", // Срабатывает почти сразу при появлении\n                    toggleActions: \"play none none none\"\n                },\n                y: 0,\n                opacity: 1,\n                visibility: \"visible\",\n                stagger: 0.2,\n                duration: 1,\n                ease: \"power3.out\",\n                onComplete: () => {\n                    // Очистка стилей после анимации для избежания конфликтов с hover\n                    gsap.set(benefitCards, { clearProps: \"y,opacity,visibility\" });\n                }\n            }\n        );\n    }\n\n\n    // ==========================================\n    // 6. ИННОВАЦИИ (TIMELINE)\n    // ==========================================\n    const innovTL = gsap.timeline({\n        scrollTrigger: {\n            trigger: \".innovations__timeline\",\n            start: \"top 70%\",\n            end: \"bottom 80%\",\n            scrub: 1\n        }\n    });\n\n    innovTL.to(\".timeline__progress\", { height: \"100%\", ease: \"none\" });\n\n    document.querySelectorAll('.step-item').forEach((step) => {\n        gsap.to(step, {\n            scrollTrigger: {\n                trigger: step,\n                start: \"top 80%\",\n                toggleClass: \"active\"\n            },\n            opacity: 1,\n            x: 0,\n            duration: 0.8\n        });\n    });\n\n\n    // ==========================================\n    // 7. КЕЙСЫ (SWIPER)\n    // ==========================================\n    if (document.querySelector('.cases-slider')) {\n        new Swiper('.cases-slider', {\n            slidesPerView: 1,\n            spaceBetween: 30,\n            loop: true,\n            navigation: {\n                nextEl: '.swiper-button-next-custom',\n                prevEl: '.swiper-button-prev-custom',\n            },\n            breakpoints: {\n                768: { slidesPerView: 2 },\n                1100: { slidesPerView: 2.5 }\n            }\n        });\n    }\n\n\n    // ==========================================\n    // 8. ФОРМА КОНТАКТОВ\n    // ==========================================\n    let captchaAnswer;\n    const captchaLabel = document.getElementById('captcha-question');\n    const contactForm = document.getElementById('contact-form');\n\n    const generateCaptcha = () => {\n        if (!captchaLabel) return;\n        const a = Math.floor(Math.random() * 10) + 1;\n        const b = Math.floor(Math.random() * 10) + 1;\n        captchaAnswer = a + b;\n        captchaLabel.innerText = `${a} + ${b}`;\n    };\n\n    generateCaptcha();\n\n    if (contactForm) {\n        const phone = document.getElementById('phone');\n        phone.addEventListener('input', (e) => e.target.value = e.target.value.replace(/[^\\d+]/g, ''));\n\n        contactForm.addEventListener('submit', (e) => {\n            e.preventDefault();\n            const userAns = parseInt(document.getElementById('captcha').value);\n\n            if (userAns !== captchaAnswer) {\n                alert('Неверный ответ на капчу!');\n                generateCaptcha();\n                return;\n            }\n\n            const btn = contactForm.querySelector('button');\n            btn.innerText = 'Отправка...';\n            btn.disabled = true;\n\n            setTimeout(() => {\n                gsap.to(contactForm, { opacity: 0, duration: 0.5, onComplete: () => {\n                    contactForm.style.display = 'none';\n                    const success = document.getElementById('form-success');\n                    success.style.display = 'flex';\n                    gsap.from(success, { opacity: 0, y: 20 });\n                }});\n            }, 1500);\n        });\n    }\n\n    window.resetForm = () => {\n        contactForm.reset();\n        contactForm.style.display = 'block';\n        contactForm.style.opacity = '1';\n        document.getElementById('form-success').style.display = 'none';\n        generateCaptcha();\n    };\n\n\n    // ==========================================\n    // 9. COOKIE POPUP\n    // ==========================================\n    const cookie = document.querySelector('#cookie-popup');\n    if (cookie && !localStorage.getItem('cookie-accepted-geo')) {\n        setTimeout(() => cookie.classList.add('active'), 3000);\n        document.querySelector('#cookie-accept').addEventListener('click', () => {\n            localStorage.setItem('cookie-accepted-geo', 'true');\n            cookie.classList.remove('active');\n        });\n    }\n\n\n    // ==========================================\n    // 10. ФИНАЛЬНЫЙ ПЕРЕСЧЕТ (REFRESH)\n    // ==========================================\n    // Это гарантирует, что все триггеры найдут свои координаты после загрузки контента\n    window.addEventListener('load', () => {\n        setTimeout(() => {\n            ScrollTrigger.refresh();\n        }, 500);\n    });\n\n});"],"names":["lenis","raf","time","burger","mobileMenu","mobileLinks","toggleMenu","link","heroTitle","orb","e","x","y","benefitsGrid","benefitCards","step","captchaAnswer","captchaLabel","contactForm","generateCaptcha","a","b","btn","success","cookie"],"mappings":"ssBAMA,KAAK,eAAe,aAAa,EAEjC,SAAS,iBAAiB,mBAAoB,IAAM,CAKhD,MAAMA,EAAQ,IAAI,MAAM,CACpB,SAAU,IACV,OAAS,GAAM,KAAK,IAAI,EAAG,MAAQ,KAAK,IAAI,EAAG,IAAM,CAAC,CAAC,EACvD,YAAa,EACrB,CAAK,EAED,SAASC,EAAIC,EAAM,CACfF,EAAM,IAAIE,CAAI,EACd,sBAAsBD,CAAG,CACjC,CACI,sBAAsBA,CAAG,EAGzBD,EAAM,GAAG,SAAU,cAAc,MAAM,EACvC,KAAK,OAAO,IAAKE,GAAS,CACtBF,EAAM,IAAIE,EAAO,GAAI,CAC7B,CAAK,EACD,KAAK,OAAO,aAAa,CAAC,EAM1B,MAAMC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAc,SAAS,iBAAiB,mBAAmB,EAE3DC,EAAa,IAAM,CACrBH,EAAO,UAAU,OAAO,QAAQ,EAChCC,EAAW,UAAU,OAAO,QAAQ,EACpCA,EAAW,UAAU,SAAS,QAAQ,EAAIJ,EAAM,KAAI,EAAKA,EAAM,MAAO,CACzE,EAEGG,GAAQA,EAAO,iBAAiB,QAASG,CAAU,EAEvDD,EAAY,QAAQE,GAAQ,CACxBA,EAAK,iBAAiB,QAAS,IAAM,CAC7BH,EAAW,UAAU,SAAS,QAAQ,GAAGE,EAAY,CACrE,CAAS,CACT,CAAK,EAMD,MAAME,EAAY,IAAI,UAAU,cAAe,CAAE,MAAO,eAAgB,EACzD,KAAK,SAAS,CAAE,MAAO,EAAG,CAAE,EAEpC,KAAKA,EAAU,MAAO,CACzB,QAAS,EACT,EAAG,GACH,QAAS,IACT,SAAU,EACV,KAAM,eACT,CAAA,EACA,KAAK,qBAAsB,CAAE,QAAS,EAAG,EAAG,GAAI,SAAU,EAAG,EAAI,OAAO,EACxE,KAAK,cAAe,CAAE,QAAS,EAAG,EAAG,GAAI,SAAU,EAAG,EAAI,OAAO,EACjE,KAAK,cAAe,CAAE,QAAS,EAAG,EAAG,GAAI,SAAU,EAAG,SAAU,CAAC,EAAI,OAAO,EAG7E,MAAMC,EAAM,SAAS,cAAc,WAAW,EAC1CA,GACA,OAAO,iBAAiB,YAAcC,GAAM,CACxC,MAAMC,GAAKD,EAAE,QAAU,OAAO,WAAa,GAAK,IAC1CE,GAAKF,EAAE,QAAU,OAAO,YAAc,GAAK,IACjD,KAAK,GAAGD,EAAK,CAAE,EAAAE,EAAG,EAAAC,EAAG,SAAU,EAAG,KAAM,aAAc,CAClE,CAAS,EAOL,KAAK,KAAK,wBAAyB,CAC/B,cAAe,CACX,QAAS,SACT,MAAO,SACV,EACD,EAAG,GACH,QAAS,EACT,QAAS,GACT,SAAU,EAClB,CAAK,EAMD,MAAMC,EAAe,SAAS,cAAc,iBAAiB,EACvDC,EAAe,SAAS,iBAAiB,eAAe,EAE1DD,GAAgBC,EAAa,OAAS,GAEtC,KAAK,OAAOA,EACR,CACI,EAAG,IACH,QAAS,EACT,WAAY,QACf,EACD,CACI,cAAe,CACX,QAASD,EACT,MAAO,UACP,cAAe,qBAClB,EACD,EAAG,EACH,QAAS,EACT,WAAY,UACZ,QAAS,GACT,SAAU,EACV,KAAM,aACN,WAAY,IAAM,CAEd,KAAK,IAAIC,EAAc,CAAE,WAAY,sBAAsB,CAAE,CACjF,CACA,CACS,EAOW,KAAK,SAAS,CAC1B,cAAe,CACX,QAAS,yBACT,MAAO,UACP,IAAK,aACL,MAAO,CACnB,CACA,CAAK,EAEO,GAAG,sBAAuB,CAAE,OAAQ,OAAQ,KAAM,OAAQ,EAElE,SAAS,iBAAiB,YAAY,EAAE,QAASC,GAAS,CACtD,KAAK,GAAGA,EAAM,CACV,cAAe,CACX,QAASA,EACT,MAAO,UACP,YAAa,QAChB,EACD,QAAS,EACT,EAAG,EACH,SAAU,EACtB,CAAS,CACT,CAAK,EAMG,SAAS,cAAc,eAAe,GACtC,IAAI,OAAO,gBAAiB,CACxB,cAAe,EACf,aAAc,GACd,KAAM,GACN,WAAY,CACR,OAAQ,6BACR,OAAQ,4BACX,EACD,YAAa,CACT,IAAK,CAAE,cAAe,CAAG,EACzB,KAAM,CAAE,cAAe,GAAG,CAC1C,CACA,CAAS,EAOL,IAAIC,EACJ,MAAMC,EAAe,SAAS,eAAe,kBAAkB,EACzDC,EAAc,SAAS,eAAe,cAAc,EAEpDC,EAAkB,IAAM,CAC1B,GAAI,CAACF,EAAc,OACnB,MAAMG,EAAI,KAAK,MAAM,KAAK,OAAQ,EAAG,EAAE,EAAI,EACrCC,EAAI,KAAK,MAAM,KAAK,OAAQ,EAAG,EAAE,EAAI,EAC3CL,EAAgBI,EAAIC,EACpBJ,EAAa,UAAY,GAAGG,CAAC,MAAMC,CAAC,EACvC,EAEDF,EAAiB,EAEbD,IACc,SAAS,eAAe,OAAO,EACvC,iBAAiB,QAAUR,GAAMA,EAAE,OAAO,MAAQA,EAAE,OAAO,MAAM,QAAQ,UAAW,EAAE,CAAC,EAE7FQ,EAAY,iBAAiB,SAAWR,GAAM,CAI1C,GAHAA,EAAE,eAAgB,EACF,SAAS,SAAS,eAAe,SAAS,EAAE,KAAK,IAEjDM,EAAe,CAC3B,MAAM,0BAA0B,EAChCG,EAAiB,EACjB,MAChB,CAEY,MAAMG,EAAMJ,EAAY,cAAc,QAAQ,EAC9CI,EAAI,UAAY,cAChBA,EAAI,SAAW,GAEf,WAAW,IAAM,CACb,KAAK,GAAGJ,EAAa,CAAE,QAAS,EAAG,SAAU,GAAK,WAAY,IAAM,CAChEA,EAAY,MAAM,QAAU,OAC5B,MAAMK,EAAU,SAAS,eAAe,cAAc,EACtDA,EAAQ,MAAM,QAAU,OACxB,KAAK,KAAKA,EAAS,CAAE,QAAS,EAAG,EAAG,GAAI,CAC5D,CAAiB,CAAC,CACL,EAAE,IAAI,CACnB,CAAS,GAGL,OAAO,UAAY,IAAM,CACrBL,EAAY,MAAO,EACnBA,EAAY,MAAM,QAAU,QAC5BA,EAAY,MAAM,QAAU,IAC5B,SAAS,eAAe,cAAc,EAAE,MAAM,QAAU,OACxDC,EAAiB,CACpB,EAMD,MAAMK,EAAS,SAAS,cAAc,eAAe,EACjDA,GAAU,CAAC,aAAa,QAAQ,qBAAqB,IACrD,WAAW,IAAMA,EAAO,UAAU,IAAI,QAAQ,EAAG,GAAI,EACrD,SAAS,cAAc,gBAAgB,EAAE,iBAAiB,QAAS,IAAM,CACrE,aAAa,QAAQ,sBAAuB,MAAM,EAClDA,EAAO,UAAU,OAAO,QAAQ,CAC5C,CAAS,GAQL,OAAO,iBAAiB,OAAQ,IAAM,CAClC,WAAW,IAAM,CACb,cAAc,QAAS,CAC1B,EAAE,GAAG,CACd,CAAK,CAEL,CAAC"}