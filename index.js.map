{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["/**\n * GEO-MARKZ.BLOG - Main JavaScript Asset\n * Libraries used: GSAP, ScrollTrigger, SplitType, Lenis, Swiper\n */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    \n    // ==========================================\n    // 1. ИНИЦИАЛИЗАЦИЯ SMOOTH SCROLL (LENIS)\n    // ==========================================\n    const lenis = new Lenis({\n        duration: 1.2,\n        easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n        orientation: 'vertical',\n        gestureOrientation: 'vertical',\n        smoothWheel: true,\n    });\n\n    function raf(time) {\n        lenis.raf(time);\n        requestAnimationFrame(raf);\n    }\n    requestAnimationFrame(raf);\n\n    // Интеграция Lenis со ScrollTrigger\n    lenis.on('scroll', ScrollTrigger.update);\n    gsap.ticker.add((time) => {\n        lenis.raf(time * 1000);\n    });\n    gsap.ticker.lagSmoothing(0);\n\n\n    // ==========================================\n    // 2. HEADER & NAVIGATION\n    // ==========================================\n    const header = document.querySelector('.header');\n    \n    // Эффект хедера при скролле\n    window.addEventListener('scroll', () => {\n        if (window.scrollY > 50) {\n            header.style.padding = '12px 0';\n            header.style.boxShadow = '0 10px 30px rgba(15, 23, 42, 0.08)';\n            header.style.background = 'rgba(255, 255, 255, 0.95)';\n        } else {\n            header.style.padding = '20px 0';\n            header.style.boxShadow = 'none';\n            header.style.background = 'rgba(248, 250, 252, 0.8)';\n        }\n    });\n\n    // Плавный переход по якорям через Lenis\n    document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\n        anchor.addEventListener('click', function (e) {\n            e.preventDefault();\n            const target = document.querySelector(this.getAttribute('href'));\n            if (target) {\n                lenis.scrollTo(target, { offset: -80 });\n            }\n        });\n    });\n\n\n    // ==========================================\n    // 3. МОБИЛЬНОЕ МЕНЮ (BURGER)\n    // ==========================================\n    const burger = document.querySelector('.burger');\n    const mobileMenu = document.querySelector('#mobile-menu');\n    const mobileLinks = document.querySelectorAll('.mobile-nav__link');\n\n    function toggleMenu() {\n        burger.classList.toggle('active');\n        mobileMenu.classList.toggle('active');\n        \n        if (mobileMenu.classList.contains('active')) {\n            lenis.stop(); // Блокируем скролл при открытом меню\n            gsap.from('.mobile-nav__link', {\n                y: 30,\n                opacity: 0,\n                stagger: 0.1,\n                duration: 0.5,\n                delay: 0.3\n            });\n        } else {\n            lenis.start();\n        }\n    }\n\n    if(burger) burger.addEventListener('click', toggleMenu);\n\n    mobileLinks.forEach(link => {\n        link.addEventListener('click', () => {\n            if (mobileMenu.classList.contains('active')) toggleMenu();\n        });\n    });\n\n\n    // ==========================================\n    // 4. HERO ANIMATIONS (GSAP + SPLITTYPE)\n    // ==========================================\n    // Анимация текста заголовка\n    const heroTitle = new SplitType('#hero-title', { types: 'words, chars' });\n    \n    const heroTL = gsap.timeline({ delay: 0.5 });\n\n    heroTL.from(heroTitle.chars, {\n        opacity: 0,\n        y: 50,\n        duration: 1,\n        stagger: 0.02,\n        ease: \"back.out(1.7)\"\n    })\n    .from('.hero__description', {\n        opacity: 0,\n        y: 20,\n        duration: 0.8\n    }, \"-=0.6\")\n    .from('.hero__btns', {\n        opacity: 0,\n        y: 20,\n        duration: 0.8\n    }, \"-=0.6\")\n    .from('.hero__card', {\n        opacity: 0,\n        x: 50,\n        rotation: 10,\n        duration: 1,\n        ease: \"power3.out\"\n    }, \"-=1\");\n\n    // Интерактивный Orb (движение за мышкой)\n    const orb = document.querySelector('#hero-orb');\n    if (orb) {\n        window.addEventListener('mousemove', (e) => {\n            const { clientX, clientY } = e;\n            const x = (clientX - window.innerWidth / 2) * 0.08;\n            const y = (clientY - window.innerHeight / 2) * 0.08;\n            \n            gsap.to(orb, {\n                x: x,\n                y: y,\n                duration: 2,\n                ease: \"power2.out\"\n            });\n        });\n    }\n\n\n    // ==========================================\n    // 5. SCROLL ANIMATIONS (SECTIONS)\n    // ==========================================\n    gsap.registerPlugin(ScrollTrigger);\n\n    // О Платформе (About)\n    const aboutTL = gsap.timeline({\n        scrollTrigger: {\n            trigger: \".about\",\n            start: \"top 70%\",\n        }\n    });\n\n    aboutTL.from(\".about__image\", { x: -60, opacity: 0, duration: 1 })\n           .from(\".about__content .section-title\", { y: 30, opacity: 0, duration: 0.6 }, \"-=0.6\")\n           .from(\".feature-item\", { y: 20, opacity: 0, stagger: 0.2, duration: 0.5 }, \"-=0.4\");\n\n    // Преимущества (Benefits)\n    gsap.from(\".benefit-card\", {\n        scrollTrigger: {\n            trigger: \".benefits__grid\",\n            start: \"top 80%\",\n        },\n        y: 50,\n        opacity: 0,\n        stagger: 0.2,\n        duration: 0.8,\n        ease: \"power2.out\"\n    });\n\n    // Линия инноваций (Innovations Timeline)\n    const innovTL = gsap.timeline({\n        scrollTrigger: {\n            trigger: \".innovations__timeline\",\n            start: \"top 60%\",\n            end: \"bottom 80%\",\n            scrub: 1\n        }\n    });\n\n    innovTL.to(\".timeline__progress\", { height: \"100%\", ease: \"none\" });\n\n    document.querySelectorAll('.step-item').forEach((step) => {\n        gsap.to(step, {\n            scrollTrigger: {\n                trigger: step,\n                start: \"top 75%\",\n                toggleClass: \"active\",\n            },\n            opacity: 1,\n            x: 0,\n            duration: 0.8\n        });\n    });\n\n\n    // ==========================================\n    // 6. SWIPER (CASES SLIDER)\n    // ==========================================\n    if (document.querySelector('.cases-slider')) {\n        const casesSlider = new Swiper('.cases-slider', {\n            slidesPerView: 1,\n            spaceBetween: 30,\n            loop: true,\n            navigation: {\n                nextEl: '.swiper-button-next-custom',\n                prevEl: '.swiper-button-prev-custom',\n            },\n            breakpoints: {\n                768: { slidesPerView: 2 },\n                1100: { slidesPerView: 2.5 }\n            }\n        });\n    }\n\n\n    // ==========================================\n    // 7. КОНТАКТНАЯ ФОРМА & КАПЧА\n    // ==========================================\n    let captchaAnswer;\n    const captchaQ = document.getElementById('captcha-question');\n    const contactForm = document.getElementById('contact-form');\n    const formSuccess = document.getElementById('form-success');\n    const phoneInput = document.getElementById('phone');\n\n    function generateCaptcha() {\n        if (!captchaQ) return;\n        const n1 = Math.floor(Math.random() * 10) + 1;\n        const n2 = Math.floor(Math.random() * 10) + 1;\n        captchaAnswer = n1 + n2;\n        captchaQ.innerText = `${n1} + ${n2}`;\n    }\n\n    if (captchaQ) generateCaptcha();\n\n    // Валидация телефона\n    if (phoneInput) {\n        phoneInput.addEventListener('input', (e) => {\n            e.target.value = e.target.value.replace(/[^\\d+]/g, '');\n        });\n    }\n\n    // Обработка формы\n    if (contactForm) {\n        contactForm.addEventListener('submit', (e) => {\n            e.preventDefault();\n            const userAnswer = parseInt(document.getElementById('captcha').value);\n\n            if (userAnswer !== captchaAnswer) {\n                alert('Ошибка: Неверный ответ на защитный вопрос.');\n                generateCaptcha();\n                return;\n            }\n\n            const submitBtn = contactForm.querySelector('button');\n            submitBtn.innerText = 'Отправка...';\n            submitBtn.disabled = true;\n\n            // Имитация AJAX\n            setTimeout(() => {\n                gsap.to(contactForm, { opacity: 0, duration: 0.4, onComplete: () => {\n                    contactForm.style.display = 'none';\n                    formSuccess.style.display = 'flex';\n                    gsap.from(formSuccess, { opacity: 0, y: 20, duration: 0.5 });\n                }});\n            }, 1500);\n        });\n    }\n\n    // Глобальная функция сброса формы для кнопки \"Отправить еще раз\"\n    window.resetForm = function() {\n        contactForm.reset();\n        contactForm.style.display = 'block';\n        contactForm.style.opacity = '1';\n        formSuccess.style.display = 'none';\n        generateCaptcha();\n    };\n\n\n    // ==========================================\n    // 8. COOKIE POPUP\n    // ==========================================\n    const cookiePopup = document.querySelector('#cookie-popup');\n    const cookieAccept = document.querySelector('#cookie-accept');\n\n    if (cookiePopup && !localStorage.getItem('cookies-accepted')) {\n        setTimeout(() => {\n            cookiePopup.classList.add('active');\n        }, 3000);\n    }\n\n    if (cookieAccept) {\n        cookieAccept.addEventListener('click', () => {\n            localStorage.setItem('cookies-accepted', 'true');\n            cookiePopup.classList.remove('active');\n        });\n    }\n\n});"],"names":["lenis","t","raf","time","header","anchor","e","target","burger","mobileMenu","mobileLinks","toggleMenu","link","heroTitle","orb","clientX","clientY","x","y","step","captchaAnswer","captchaQ","contactForm","formSuccess","phoneInput","generateCaptcha","n1","n2","submitBtn","cookiePopup","cookieAccept"],"mappings":"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"}